---
title: "4180 Chattanooga Crime Data"
author: "Thomas Raines, Yatri Patel"
date: "10/15/2021"
output:
  html_document:
    toc: yes
    toc_float: yes
  pdf_document:
    toc: yes
---

```{r}
library(tidyverse)
library(ggplot2)
library(dplyr)
library(reshape2)
library(lubridate)
library(sf)
library(raster)
library(ggplot2)


```



```{r}
#read the main police incident database
police_incident <- read_csv("Police_Incident_Data.csv")

head(police_incident)
```




```{r}
censusPopData <- read_csv('Hamilton_County_Census_Tract_Population_-_2018_ACS_Five_Year.csv')

head(censusPopData)

colnames(censusPopData)[3] <- "TRACT_ID"
```

```{r}
censusIncData <- read_csv('2017_Median_Income.csv')
head(censusIncData)
```

```{r}
#merge the income and population data

censusData <- merge(censusPopData,censusIncData,by="TRACT_ID")

head(censusData)


```


```{r}
## Make shape file for Census Population
censusPopShp <- read_sf("geo_export_fe8d8733-afc7-42cd-b460-c1b7a15311bb.shp")
head(censusPopShp)
```


```{r}
## Make shape file for 2017 Median Income
censusIncShp <- read_sf("geo_export_43a087a5-8ff8-4733-9a99-dd658a9c17f4.shp")

head(censusIncShp)
```


```{r}
## Merge our Shape Files to one big shape file
censusDataShp <- st_union(censusIncShp, censusPopShp)

head(censusDataShp)


plot(censusDataShp)






```


```{r}
## Plot in ggplot

ggplot() +
  geom_sf(data = censusDataShp, aes(fill= `median_i_3`)) +
  theme_classic() +
  theme_dark()


```

<<<<<<< Updated upstream
=======

```{r}
##Remove the Time Stamps from the Date Incidents
police_incident$Date_Incident <- str_sub(police_incident$Date_Incident, 1, nchar(police_incident$Date_Incident)-12)

head(police_incident)
```



```{r}
##Make Incident Dates date type
police_incident$Date_Incident <- as.Date(police_incident$Date_Incident, format = "%m/%d/%Y")


head(police_incident)
```

```{r}
## Get a count of incidents by date and plot it
i<- incidence(police_incident$Date_Incident, interval = "1 day")

plot(i[1:366], border = "black", color = 'blue', xlab = "Date", ylab = 'Number of incidents' )

```
```{r}
## Plot Incidents Per Week:
i<- incidence(police_incident$Date_Incident, interval = "1 week")

plot(i[1:350], border = "black", color = 'blue', xlab = "week", ylab = 'Number of incidents' )
```    


```{r}
## Plot Incidents Per Month:

x<- incidence(police_incident$Date_Incident, interval = "1 month")

plot(x[1:82], border = "black", color = 'blue', xlab = "week", ylab = 'Number of incidents' )



```    

>>>>>>> Stashed changes
